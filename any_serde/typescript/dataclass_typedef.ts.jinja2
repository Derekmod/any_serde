export type {{value_type_name}} = {
    {%- for field_name, field_typedef in field_typedefs %}
    {{field_name}}: {{field_typedef.value_type_name}};
    {%- endfor %}
};

export type {{data_type_name}} = {
    {%- for field_name, field_typedef in field_typedefs %}
    {{field_name}}: {{field_typedef.data_type_name}};
    {%- endfor %}
};

export function {{to_data_name}}(value: {{value_type_name}}): {{data_type_name}} {
    return {
        {%- for field_name, field_typedef in field_typedefs %}
        {{field_name}}: {{field_typedef.to_data_name}}(value.{{field_name}}),
        {%- endfor %}
    };
}

export function {{from_data_name}}(data: any): {{value_type_name}} {
    if (
        typeof data !== "object"
        || Array.isArray(data)
        || data === null
    ) {
        {{RAISE_DESERIALIZATION_ERROR}};
    }
    const dataObj: object = data;

    {%- for field_name, field_typedef in field_typedefs %}

    if (!dataObj.hasOwnProperty("{{field_name}}")) {
        {{RAISE_DESERIALIZATION_ERROR}};
    }
    const fieldValue__{{field_name}} = {{field_typedef.from_data_name}}(dataObj["{{field_name}}"]);
    {%- endfor %}

    return {
        {%- for field_name, field_typedef in field_typedefs %}
        {{field_name}}: fieldValue__{{field_name}},
        {%- endfor %}
    };
}